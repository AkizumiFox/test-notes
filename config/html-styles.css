/* custom.css */

/* ========================================
   Quarto Theorem Environments - Color Scheme
   ======================================== */

/* --- Base style for full-box theorem environments --- */
.theorem, .lemma, .corollary, .proposition, .conjecture,
.definition, .example, .exercise {
  padding: 1rem;
  margin-bottom: 1.5rem;
  border-radius: 4px;
  border-left: 4px solid;
  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
  font-style: normal;  /* No italics */
}

/* Remove italics from theorem content */
.theorem p, .lemma p, .corollary p, .proposition p, .conjecture p,
.definition p, .example p, .exercise p {
  font-style: normal;
}

/* --- Theorem (Blue) --- */
.theorem {
  background-color: #eef6ff;
  border-left-color: #4087e8;
}

/* --- Lemma (Yellow/Amber) --- */
.lemma {
  background-color: #fff8e1;
  border-left-color: #ffa000;
}

/* --- Corollary (Cyan) --- */
.corollary {
  background-color: #e0f7fa;
  border-left-color: #00acc1;
}

/* --- Proposition (Indigo) --- */
.proposition {
  background-color: #e8eaf6;
  border-left-color: #5c6bc0;
}

/* --- Conjecture (Purple) --- */
.conjecture {
  background-color: #f3e5f5;
  border-left-color: #ab47bc;
}

/* --- Definition (Pink/Red) --- */
.definition {
  background-color: #fce4ec;
  border-left-color: #e91e63;
}

/* --- Example (Green) --- */
.example {
  background-color: #e8f5e9;
  border-left-color: #4caf50;
}

/* --- Exercise (Orange) --- */
.exercise {
  background-color: #fff3e0;
  border-left-color: #ff9800;
}

/* --- Solution, Remark, Proof, Algorithm (Unified: grey bar on left) --- */
.solution, .remark, .proof, .algorithm {
  margin-top: 1rem;
  margin-bottom: 1.5rem;
  padding: 0.75rem 1rem;
  border-left: 3px solid #bdbdbd;
  background-color: white;
  box-shadow: none;
  border-radius: 0;
  color: #555555;
}

/* Hide numbering for solution and remark in HTML */
/* Use content replacement to show title without number */
.solution > p > .proof-title > em,
.remark > p > .proof-title > em {
  font-size: 0;
}
.solution > p > .proof-title > em::before {
  content: "Solution";
  font-size: 1rem;
  font-style: italic;
}
.remark > p > .proof-title > em::before {
  content: "Remark";
  font-size: 1rem;
  font-style: italic;
}

/* --- Titles for all environments --- */
.theorem-title, .lemma-title, .corollary-title, .proposition-title, 
.conjecture-title, .definition-title, .example-title, .exercise-title, 
.algorithm-title {
  font-weight: bold;
  display: block;
  margin-bottom: 0.5rem;
  color: inherit;
  font-style: normal;
}

/* Proof, Solution, Remark titles: inline (no line break after title) */
.proof .proof-title,
.solution .proof-title,
.remark .proof-title {
  font-weight: normal;
  font-style: italic;
  display: inline;
  margin-bottom: 0;
  color: inherit;
}

/* --- 修正 Tippy.js Tooltip 樣式 (Quarto 使用 Tippy.js，不是 Bootstrap Popover) --- */

/* 主容器 */
.tippy-box[data-theme="quarto"] {
  max-width: 600px !important;
  width: max-content !important;
  background-color: #ffffff !important;
  border: 1px solid #ccc !important;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15) !important;
  border-radius: 6px !important;
}

/* 內容區 - 關鍵：移除高度限制讓內容完整顯示 */
.tippy-box[data-theme="quarto"] .tippy-content {
  padding: 8px 12px !important;
  overflow: visible !important;      /* 完全移除卷軸 */
  height: auto !important;           /* 高度自動適應內容 */
  max-height: none !important;       /* 移除最大高度限制 */
}

/* 關鍵修正：移除 .math.display 的預設間距 */
.tippy-content .math.display {
  display: block !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* 移除段落的預設外距 */
.tippy-content p {
  margin: 0 !important;
  padding: 0 !important;
}

/* 針對 MathJax 容器的微調 */
.tippy-content mjx-container {
  margin: 0 !important;
  padding: 0 !important;
}

.tippy-content mjx-container[display="true"] {
  margin: 0 !important;
  padding: 0 !important;
}

/* 箭頭顏色配合背景 */
.tippy-box[data-theme="quarto"] .tippy-arrow::before {
  border-bottom-color: #ffffff !important;
  border-top-color: #ffffff !important;
}
